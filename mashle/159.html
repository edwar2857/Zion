<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mashle</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #96BB54;
      --bg-dark: #070817;
      --bg-card: #121430;
      --accent: #e67e22;
      --text-main: #ffffff;
      --glass: rgba(255, 255, 255, 0.05);
      --transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
    body { background-color: var(--bg-dark); color: var(--text-main); overflow-x: hidden; text-align: center; }

    /* HEADER */
    header {
      position: sticky; top: 0; z-index: 1100;
      background: rgba(7, 8, 23, 0.95); backdrop-filter: blur(15px);
      padding: 10px 4%; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid var(--glass);
    }
    .logo-link { text-decoration: none; color: var(--primary); font-weight: 800; font-size: 1.2rem; display: none; }
    @media (min-width: 768px) { .logo-link { display: block; } }

    .search-container { flex: 1; }
    .buscador {
      width: 100%; background: var(--glass); border: 1px solid rgba(255, 255, 255, 0.1);
      padding: 10px 20px; border-radius: 50px; color: white; outline: none; font-size: 15px;
    }

    /* MENU LATERAL */
    #menu { 
      position: fixed; top: 0; left: -105%; width: 85%; max-width: 320px; height: 100vh; 
      background: var(--bg-card); z-index: 2000; padding: 30px 20px; transition: var(--transition); 
      overflow-y: auto; text-align: left; border-right: 1px solid var(--glass);
    }
    #menu.active { left: 0; }
    #overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1500; backdrop-filter: blur(5px); }
    
    .seccion-label { font-size: 0.7rem; color: var(--primary); font-weight: 800; text-transform: uppercase; margin: 25px 0 15px 5px; letter-spacing: 1.5px; opacity: 0.7; }
    .grid-filtros { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .filtro { padding: 12px; background: var(--glass); border-radius: 8px; color: #eee; text-decoration: none; display: block; font-size: 0.8rem; transition: 0.3s; text-align: center; }
    .filtro:hover { background: var(--primary); color: #000; }
    .filtro-full { grid-column: 1 / -1; }

    /* TITULO ORIGINAL */
    .main-container { display: flex; flex-direction: column; align-items: center; padding: 15px 4% 50px; width: 100%; }
    h1#titulo_display { 
        font-size: clamp(1.1rem, 4vw, 1.8rem); font-weight: 800; margin-bottom: 15px;
        background: linear-gradient(to right, #fff, var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }

    /* PLAYER */
    .player-wrapper { 
        width: 100%; max-width: 1100px; background: #000; border-radius: 12px; overflow: hidden; 
        box-shadow: 0 20px 50px rgba(0,0,0,0.8); border: 1px solid var(--glass);
    }
    .iframe-container { position: relative; padding-bottom: 90%; height: 0; }
    @media (min-width: 1024px) { .iframe-container { padding-bottom: 0; height: 550px; } }
    .iframe-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; display: none; }

    /* SELECTORES LADO A LADO */
    .selector-container { 
        width: 100%; max-width: 1100px; margin: 15px 0; 
        display: flex; flex-direction: row; gap: 10px; 
    }
    .custom-select { position: relative; flex: 1; }
    .select-trigger {
        width: 100%; padding: 14px; background: var(--bg-card); border: 1px solid var(--glass);
        color: white; border-radius: 10px; font-weight: 700; font-size: 0.85rem;
        display: flex; justify-content: center; align-items: center; cursor: pointer;
    }
    .select-trigger:after { content: '▼'; font-size: 0.6rem; color: var(--primary); margin-left: 8px; transition: 0.3s; }
    .custom-select.active .select-trigger:after { transform: rotate(180deg); }

    .select-options {
        display: block; position: absolute; top: 115%; left: 0; width: 100%;
        background: #161935; border: 1px solid var(--primary); border-radius: 10px;
        z-index: 1000; overflow-y: auto; max-height: 200px;
        opacity: 0; visibility: hidden; transform: translateY(-10px);
        transition: var(--transition);
    }
    .custom-select.active .select-options { 
        opacity: 1; visibility: visible; transform: translateY(0);
    }
    .option-item {
        width: 100%; padding: 12px; background: none; border: none; color: white;
        text-align: center; cursor: pointer; font-size: 0.85rem; border-bottom: 1px solid var(--glass);
    }
    .option-item:hover { background: var(--primary); color: black; }

    /* GRID EPISODIOS */
    .episodios-grid {
      display: grid; 
      grid-template-columns: repeat(4, 1fr); 
      gap: 8px; 
      width: 100%; 
      max-width: 1100px; 
      margin-top: 10px;
      padding: 5px;
    }

    @media (min-width: 768px) { .episodios-grid { grid-template-columns: repeat(6, 1fr); } }

    .ep-card { background: var(--bg-card); border-radius: 6px; overflow: hidden; cursor: pointer; border: 1.5px solid transparent; transition: 0.3s; }
    .ep-card.activa { border-color: var(--accent); background: rgba(230, 126, 34, 0.1); }
    .thumb { width: 100%; aspect-ratio: 16/9; object-fit: cover; pointer-events: none; }
    .ep-info { padding: 6px 2px; text-align: center; font-size: 0.65rem; font-weight: 700; }
  </style>
</head>
<body>

<header>
  <div id="btnMenu" style="cursor:pointer; padding: 5px;"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><path d="M3 12h18M3 6h18M3 18h18"/></svg></div>
  <a href="../index.html" class="logo-link">CineStream</a>
  <div class="search-container">
    <input type="search" id="buscador" class="buscador" placeholder="Buscar..." onkeypress="ejecutarBusqueda(event)">
  </div>
</header>

<div id="overlay"></div>

<nav id="menu">
  <h2 style="color:var(--primary); font-weight: 800; margin-bottom: 20px;">CineStream</h2>
  <div class="seccion-label">Navegación</div>
  <div class="grid-filtros">
    <a href="../index.html" class="filtro filtro-full">Explorar Todo</a>
    <a href="../index.html?genero=peliculas" class="filtro">Películas</a>
    <a href="../index.html?genero=series" class="filtro">Series</a>
    <a href="../index.html?genero=animes" class="filtro filtro-full">Animes</a>
  </div>
  <div class="seccion-label">Géneros</div>
  <div class="grid-filtros">
    <a href="../index.html?genero=accion" class="filtro">Acción</a>
    <a href="../index.html?genero=aventura" class="filtro">Aventura</a>
    <a href="../index.html?genero=ciencia ficcion" class="filtro">C. Ficción</a>
    <a href="../index.html?genero=comedia" class="filtro">Comedia</a>
    <a href="../index.html?genero=drama" class="filtro">Drama</a>
    <a href="../index.html?genero=terror" class="filtro">Terror</a>
    <a href="../index.html?genero=suspenso" class="filtro">Suspenso</a>
    <a href="../index.html?genero=romance" class="filtro">Romance</a>
    <a href="../index.html?genero=fantasia" class="filtro">Fantasía</a>
    <a href="../index.html?genero=misterio" class="filtro">Misterio</a>
    <a href="../index.html?genero=crimen" class="filtro">Crimen</a>
  </div>
</nav>

<main class="main-container">
  <h1 id="titulo_display">Mashle</h1>

  <div class="player-wrapper">
    <div class="iframe-container" id="player-container">
        <iframe id="iframe_s1" FRAMEBORDER="0" allow="autoplay; encrypted-media" referrerpolicy="no-referrer" allowfullscreen></iframe>
        <iframe id="iframe_s2" FRAMEBORDER="0" allow="autoplay; encrypted-media" referrerpolicy="no-referrer" allowfullscreen></iframe>
        <iframe id="iframe_s3" FRAMEBORDER="0" scrolling="yes" allow="autoplay; encrypted-media" referrerpolicy="no-referrer"allowfullscreen></iframe>
        <iframe id="iframe_s4" FRAMEBORDER="0" allow="autoplay; encrypted-media" referrerpolicy="no-referrer" allowfullscreen></iframe>
        <iframe id="iframe_s5" FRAMEBORDER="0" allow="autoplay; encrypted-media" referrerpolicy="no-referrer" allowfullscreen></iframe>
    </div>
  </div>

  <div class="selector-container">
    <div class="custom-select" id="selectServer">
        <div class="select-trigger" onclick="toggleSelect('selectServer')"><span id="currentServerText">SERVER 1</span></div>
        <div class="select-options">
            <button class="option-item" onclick="cambiarServer(1, 'SERVER 1')">SERVER 1</button>
            <button class="option-item" onclick="cambiarServer(2, 'SERVER 2')">SERVER 2</button>
            <button class="option-item" onclick="cambiarServer(3, 'SERVER 3')">SERVER 3</button>
            <button class="option-item" onclick="cambiarServer(4, 'SERVER 4')">SERVER 4</button>
            <button class="option-item" onclick="cambiarServer(5, 'SERVER 5')">SERVER 5</button>
        </div>
    </div>
    <div class="custom-select" id="selectTemp">
        <div class="select-trigger" onclick="toggleSelect('selectTemp')"><span id="currentTempText">Temporada 1</span></div>
        <div class="select-options">
            <button class="option-item" onclick="mostrarTemporada(1, 'Temporada 1')">Temporada 1</button>
            <button class="option-item" onclick="mostrarTemporada(2, 'Temporada 2')">Temporada 2</button>
        </div>
    </div>
  </div>

  <div id="grid-episodios" class="episodios-grid"></div>
</main>

<script>
  // BUSCADOR ENLAZADO AL INDEX
  function ejecutarBusqueda(event) {
    if (event.key === 'Enter') {
      const q = document.getElementById('buscador').value.trim();
      if (q.length > 0) window.location.href = `../index.html?search=${encodeURIComponent(q)}`;
    }
  }

  // MENÚ LATERAL
  const menu = document.getElementById('menu'), overlay = document.getElementById('overlay'), btnMenu = document.getElementById('btnMenu');
  btnMenu.onclick = () => { menu.classList.add('active'); overlay.style.display = 'block'; };
  overlay.onclick = () => { menu.classList.remove('active'); overlay.style.display = 'none'; };

  let tActual = 1, sActual = 1, epSeleccionadoIdx = 0;

  const seriesDB = {
    1: [
      { n: 1, t: "https://iili.io/fg0Rvzg.jpg", s1: "https://fastream.to/embed-pv6nv8ilkfe0.html", s2: "https://hglink.to/e/40nrr3wmo6f5", s3: "https://embed69.org/f/tt21209804-1x01", s4: "https://uqload.co/embed-ehr1gk36oyzn.html", s5: "https://voe.sx/e/kl6kaamp88gi" },
      { n: 2, t: "https://iili.io/fg0R8Xa.jpg", s1: "https://fastream.to/embed-hjtf2x4opz0r.html", s2: "https://hglink.to/e/cekvc6sazty9", s3: "https://embed69.org/f/tt21209804-1x02", s4: "https://uqload.co/embed-wbvddjusze1x.html", s5: "https://voe.sx/e/hkjyn4wyuni0" },
      { n: 3, t: "https://iili.io/fg0RSLJ.jpg", s1: "https://fastream.to/embed-n6pf1zdaz50m.html", s2: "https://hglink.to/e/gkczpdlp1cwx", s3: "https://embed69.org/f/tt21209804-1x03", s4: "https://uqload.co/embed-8bvratgdzft3.html", s5: "https://voe.sx/e/rlgayl6psmcv" },
      { n: 4, t: "https://iili.io/fg0RemF.jpg", s1: "https://fastream.to/embed-rq6m7i2nzwor.html", s2: "https://hglink.to/e/krtq9hqxyda1", s3: "https://embed69.org/f/tt21209804-1x04", s4: "https://uqload.co/embed-b4kj9yffi2di.html", s5: "https://voe.sx/e/xrpv0oxcnphb" },
      { n: 5, t: "https://iili.io/fg0Rr1R.jpg", s1: "https://fastream.to/embed-b33ytje4av5c.html", s2: "https://hglink.to/e/ugnytkne398i", s3: "https://embed69.org/f/tt21209804-1x05", s4: "https://uqload.co/embed-kh0f9ipeaxvw.html", s5: "https://voe.sx/e/sltvs7tzhud3" },
      { n: 6, t: "https://iili.io/fg0an4f.jpg", s1: "https://fastream.to/embed-bi1c1y96d78t.html", s2: "https://hglink.to/e/1jb5kj0klhdj", s3: "https://embed69.org/f/tt21209804-1x06", s4: "https://voe.sx/e/dzh3btqkojkw", s5: "https://uqload.co/embed-bbrloridw52l.html" },
      { n: 7, t: "https://iili.io/fg0aBBs.jpg", s1: "https://fastream.to/embed-6kyi8mm6le3l.html", s2: "https://hglink.to/e/2ad2ehozrob1", s3: "https://embed69.org/f/tt21209804-1x07", s4: "https://voe.sx/e/k9kok0asshbq", s5: "https://hqq.to/e/c0U2NXlQam9Ub2IycUN6dVo1RTl2QT09" },
      { n: 8, t: "https://iili.io/fg0aCEG.jpg", s1: "https://fastream.to/embed-x6956ae0rqvv.html", s2: "https://hglink.to/e/ps5cpgn27p2v", s3: "https://embed69.org/f/tt21209804-1x08",  s4: "https://voe.sx/e/aypzaizhea12", s5: "https://uqload.co/embed-tw27t5p0qyw0.html" },
      { n: 9, t: "https://iili.io/fg0ax24.jpg", s1: "https://fastream.to/embed-x5ftamvn2mq6.html", s2: "https://hglink.to/e/ehi7gk104ea6", s3: "https://embed69.org/f/tt21209804-1x09", s4: "https://voe.sx/e/2ohmfniepnkk", s5: "https://uqload.co/embed-83t76g58p9s9.html" },
      { n: 10, t: "https://iili.io/fg0zYl.jpg", s1: "https://fastream.to/embed-m0oxqmhirbmt.html", s2: "https://hglink.to/e/e9epi8q4k0ne", s3: "https://embed69.org/f/tt21209804-1x10", s4: "https://uqload.co/embed-x376yetpihqv.html", s5: "https://voe.sx/e/oxcctvszhnzz" },
      { n: 11, t: "https://iili.io/fg0aIv2.jpg", s1: "https://fastream.to/embed-5pcnhn4dkmyy.html", s2: "https://hglink.to/e/detwq1a0uqwa", s3: "https://embed69.org/f/tt21209804-1x11", s4: "https://uqload.co/embed-93hy96b36cja.html", s5: "https://voe.sx/e/99fxevwtfxrh" },
      { n: 12, t: "https://iili.io/fg0aTpS.jpg", s1: "https://fastream.to/embed-etom165h3e6h.html", s2: "https://fastream.to/embed-etom165h3e6h.html", s3: "https://embed69.org/f/tt21209804-1x12", s4: "https://voe.sx/e/x5die3beco3h", s5: "https://uqload.co/embed-m8y86rnqbiar.html" }
    ],
    2: [
      { n: 1, t: "https://iili.io/fg0E4rg.jpg", s1: "https://sendvid.com/embed/487qzbge", s2: "https://hglink.to/e/k7dsljmocmgc", s3: "https://embed69.org/f/tt21209804-2x01", s4: "https://flaswish.com/e/uzqqdp4d2my6", s5: "https://uqload.io/embed-a7cw7x1khync.html" },
      { n: 2, t: "https://iili.io/fg0ESLP.jpg", s1: "https://voe.sx/e/c67xk9hu1gyv", s2: "https://hglink.to/e/0fptcqpqz9o5", s3: "https://embed69.org/f/tt21209804-2x02", s4: "https://voe.sx/e/c67xk9hu1gyv", s5: "https://sendvid.com/embed/y9q7rc8o" },
      { n: 3, t: "https://iili.io/fg0E8hB.jpg", s1: "https://cdnwish.com/e/xxflj3cpvwxk", s2: "https://hglink.to/e/dhbrw40ndgt8", s3: "https://embed69.org/f/tt21209804-2x03", s4: "https://voe.sx/e/c67xk9hu1gyv", s5: "https://voe.sx/e/qjp9hpwld3ic" },
      { n: 4, t: "https://iili.io/fg0ErEF.jpg", s1: "https://sendvid.com/embed/o7dcx7tt", s2: "https://voe.sx/e/udi0jezv0iis", s3: "https://embed69.org/f/tt21209804-2x04",  s4: "https://uqload.to/embed-ubhsaw7kfabd.html", s5: "https://sendvid.com/embed/2rdlafne" },
      { n: 5, t: "https://iili.io/fg0EgB1.jpg", s1: "https://streamwish.to/e/tseaveymsy6m", s2: "https://voe.sx/e/7mjmusfse9im", s3: "https://embed69.org/f/tt21209804-2x05", s4: "https://sendvid.com/embed/2p0tdqpb", s5: "https://cdnwish.com/e/lgh176d3oiv9" },
      { n: 6, t: "https://iili.io/fg0WeF1.jpg", s1: "https://streamwish.to/e/s5dws14qli6w", s2: "https://voe.sx/e/e751o8vlfj9r", s3: "https://embed69.org/f/tt21209804-2x06", s4: "https://hqq.tv/player/embed_player.php?vid=UUtYNk1QQy9PYmFIYkw5RFNPY2JzQT09", s5: "https://sendvid.com/embed/2rdlafne" },
      { n: 7, t: "https://iili.io/fg0WkcF.jpg", s1: "https://streamwish.to/e/17g7mt88onpr", s2: "https://voe.sx/e/gn63i24ccbgz", s3: "https://embed69.org/f/tt21209804-2x07", s4: "https://hqq.tv/player/embed_player.php?vid=czB1eUNhbVY3TTVSeFhxdURWZ1R1QT09", s5: "https://sendvid.com/embed/nlcz9v6v" }, 
      { n: 8, t: "https://iili.io/fg0Wv8g.jpg", s1: "https://streamwish.to/e/3thcmvjln6yy", s2: "https://voe.sx/e/alagef8gpncp", s3: "https://embed69.org/f/tt21209804-2x08", s4: "https://hqq.tv/player/embed_player.php?vid=ajdET05EREIrWXBFTmxQWDA3RTlJQT09", s5: "https://jodwish.com/e/i7scvcpj0rzq" }, 
      { n: 9, t: "https://iili.io/fg0WS9a.jpg", s1: "https://hqq.tv/player/embed_player.php?vid=SUNRNUtMQVVLVGtQMkN2TzMwdEo5Zz09", s2: "https://vidhidevip.com/embed/83eltwib19y6", s3: "https://embed69.org/f/tt21209804-2x09", s4: "https://streamwish.to/e/w3s5097amqow", s5: "https://hqq.to/e/NDlBekdhV3NhK3ZNRDZVYWNNWXh2QT09" }, 
      { n: 10, t: "https://iili.io/fg0WUAJ.jpg", s1: "https://sendvid.com/embed/v7p6iar7", s2: "https://jodwish.com/e/qxe7qsq1hd31", s3: "https://embed69.org/f/tt21209804-2x10", s4: "https://voe.sx/e/pwvqmhpscewm", s5: "https://voe.sx/e/pwvqmhpscewm" }, 
      { n: 11, t: "https://iili.io/fg0w45X.jpg", s1: "https://vidhidevip.com/embed/q8147uk0r553", s2: "https://bysezoxexe.com/e/bl3gswgzuws5", s3: "https://embed69.org/f/tt21209804-2x11", s4: "https://sendvid.com/embed/g84cmabh", s5: "https://sendvid.com/embed/g84cmabh" }, 
      { n: 12, t: "https://iili.io/fg0wrJt.jpg", s1: "https://vidhidevip.com/embed/0k3occfofl16", s2: "https://sendvid.com/embed/ne6rp5qs", s3: "https://embed69.org/f/tt21209804-2x12", s4: "https://streamwish.to/e/0rq87pqtvrgj", s5: "https://hqq.tv/player/embed_player.php?vid=NGJVK0dPQzVOazVheE5oUk5jbnhJZz09" }
    ]
  };

  function toggleSelect(id) {
    const el = document.getElementById(id);
    const wasActive = el.classList.contains('active');
    document.querySelectorAll('.custom-select').forEach(s => s.classList.remove('active'));
    if(!wasActive) el.classList.add('active');
  }

  function mostrarTemporada(num, label) {
    tActual = num; epSeleccionadoIdx = 0;
    document.getElementById('currentTempText').innerText = label;
    document.getElementById('selectTemp').classList.remove('active');
    renderGrid(); cargarEpisodio(0);
  }

  function cambiarServer(num, label) {
    sActual = num;
    document.getElementById('currentServerText').innerText = label;
    document.getElementById('selectServer').classList.remove('active');
    cargarEpisodio(epSeleccionadoIdx);
  }

  function renderGrid() {
    const grid = document.getElementById("grid-episodios"); grid.innerHTML = "";
    seriesDB[tActual].forEach((ep, idx) => {
      const card = document.createElement("div");
      card.className = `ep-card ${idx === epSeleccionadoIdx ? 'activa' : ''}`;
      card.onclick = () => cargarEpisodio(idx);
      card.innerHTML = `<img src="${ep.t}" class="thumb" loading="lazy"><div class="ep-info">Episodio ${ep.n}</div>`;
      grid.appendChild(card);
    });
  }

  function cargarEpisodio(idx) {
    epSeleccionadoIdx = idx; const ep = seriesDB[tActual][idx];
    document.querySelectorAll('.ep-card').forEach((c, i) => i === idx ? c.classList.add('activa') : c.classList.remove('activa'));
    document.getElementById("titulo_display").innerText = `Mashle T${tActual} - Episodio ${ep.n}`;
    document.querySelectorAll('.iframe-container iframe').forEach(f => { f.style.display = 'none'; f.src = ''; });
    const iframeActivo = document.getElementById(`iframe_s${sActual}`);
    if(iframeActivo) { 
        iframeActivo.src = ep[`s${sActual}`] || ep.s1; 
        iframeActivo.style.display = 'block'; 
    }
  }

  window.onclick = (e) => { if (!e.target.closest('.custom-select')) document.querySelectorAll('.custom-select').forEach(s => s.classList.remove('active')); };
  window.onload = () => mostrarTemporada(1, 'Temporada 1');
</script>
</body>
</html>